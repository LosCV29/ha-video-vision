analyze_camera:
  name: Analyze Camera
  description: Record video from camera and analyze with AI vision.
  fields:
    camera:
      name: Camera
      description: Camera name or alias to analyze
      required: true
      example: "driveway"
      selector:
        text:
    duration:
      name: Duration
      description: Recording duration in seconds
      required: false
      default: 3
      selector:
        number:
          min: 1
          max: 10
          step: 1
          unit_of_measurement: seconds
    user_query:
      name: Prompt
      description: Custom prompt for the AI analysis
      required: false
      example: "Describe what you see. Only state what is visible."
      selector:
        text:
          multiline: true
    facial_recognition:
      name: Facial Recognition
      description: Enable facial recognition for this analysis. Only runs when enabled - no slowdown for manual calls.
      required: false
      default: false
      selector:
        boolean:
    remember:
      name: Save to Timeline
      description: Save this analysis to the Timeline calendar for historical tracking. View in Calendar panel or dashboard.
      required: false
      default: false
      selector:
        boolean:
    instant_capture:
      name: Instant Capture
      description: Capture snapshot IMMEDIATELY when triggered, before recording video. Use for fast-moving subjects (delivery people, runners) who may leave before video recording completes. The snapshot shows WHO triggered the motion, while video provides AI context.
      required: false
      default: false
      selector:
        boolean:

record_clip:
  name: Record Clip
  description: Record a video clip from camera without analysis.
  fields:
    camera:
      name: Camera
      description: Camera name or alias to record from
      required: true
      example: "porch"
      selector:
        text:
    duration:
      name: Duration
      description: Recording duration in seconds
      required: false
      default: 3
      selector:
        number:
          min: 1
          max: 10
          step: 1
          unit_of_measurement: seconds

identify_faces:
  name: Identify Faces
  description: Identify faces in an image using the Facial Recognition add-on (github.com/LosCV29/ha-addons).
  fields:
    image_path:
      name: Image Path
      description: Path to the image file (e.g., from analyze_camera snapshot_path)
      required: true
      example: "/media/ha_video_vision/driveway_latest.jpg"
      selector:
        text:
    server_url:
      name: Server URL
      description: URL of the facial recognition server. Leave empty to use the configured URL from integration settings.
      required: false
      default: ""
      example: "http://localhost:8100"
      selector:
        text:
    min_confidence:
      name: Minimum Confidence
      description: Minimum confidence percentage to include in results
      required: false
      default: 50
      selector:
        number:
          min: 0
          max: 100
          step: 5
          unit_of_measurement: "%"

